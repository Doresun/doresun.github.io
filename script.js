
games = [
    'bin',
    'uhc',
    'min',
    'scp',
    'zom',
    'jaz',
    'bus',
    'tts',
    'tld',
    'jbx',
    'apo',
    'amg',
    'gmd',
    'hl1',
    'hl2',
    'lbf',
    'ttd',
    'sdm',
    'tio',
    'svc',
    'dtl',
    'lco',
    'cod',
    'sgm'
]
gamesn = new Map()
gamesn.set('bin', ['Бинго (Minecraft)', 'Ну если мода не будет то Вадима заебу'])
gamesn.set('uhc', ['УХК', 'НАКОНЕЦ-ТО'])
gamesn.set('min', ['Выживач (Minecraft)', 'Ванилла+, опять!'])
gamesn.set('scp', ['SCP: Secret Laboratory', 'Классика!'])
gamesn.set('zom', ['Project Zomboid', 'Несмотря на весь геморрой, который будет из-за 42 билда'])
gamesn.set('jaz', ['Jazztronauts', 'Долгожданный новогодний перепроход'])
gamesn.set('bus', ['gm_desertbus_deluxe', 'Вот это я вспомнил, правда?'])
gamesn.set('tts', ['Tabletop Simulator', 'Какую именно настолку? Да похуй, разберёмся.'])
gamesn.set('tld', ['The Long Drive', 'Ну должны же мы сыграть в обнову бля!\nТам дорога ВЕТВИТСЯ!'])
gamesn.set('jbx', ['Джекбокс', 'Потому что его давно не было.'])
gamesn.set('apo', ['Archipelago', 'Он же рандомайзер.'])
gamesn.set('amg', ['Among Us', 'НУ КАМОН БЛЯЯЯЯЯ'])
gamesn.set('gmd', ['Garry\'s Mod', '(КРОМЕ JAZZTRONAUTS, DESERT BUS и HL2 COOP)\nТТТ? Дезран? Слендер? Похуй, разберёмся!'])
gamesn.set('hl1', ['Half-Life Coop', '(В Sven Co-op или Garry\'s Mod)\nПотому что мы его так и не прошли.'])
gamesn.set('hl2', ['Half-Life 2 Coop', '(В Garry\'s Mod)\nПотому что планировали-планировали, да не выпланировали.'])
gamesn.set('lbf', ['Lambda Fortress', 'Самое время!\n(там кстати даже эпизоды пройти можно!)'])
gamesn.set('ttd', ['OpenTTD', 'паравозики'])
gamesn.set('sdm', ['Дезматч в S.T.A.L.K.E.R', 'Ностальгия'])
gamesn.set('tio', ['TETR.IO', 'Становимся китайцами, блок за блоком'])
gamesn.set('svc', ['Sven Co-op', '(КРОМЕ HL1 COOP)\nSTS, карты на прохождение и прочее'])
gamesn.set('dtl', ['DeathLegends', 'Мочить зомбаков :)'])
gamesn.set('lco', ['Lethal Company', 'Продолжаем!\n(по поводу сборки ничего не обещаю)'])
gamesn.set('cod', ['COD Zombies', 'Давно пора.'])
gamesn.set('sgm', ['SIGame', 'Куда ж без пары-тройки игр в сигейм?'])
gamesd = new Map()
gamesd.set('bin', ['Ну если мода не будет то Вадима заебу', 'Мода не будет (не говорите доресану)'])
gamesd.set('uhc', ['НАКОНЕЦ-ТО', 'Я ЗАКАЗАЛ НАЁМНЫХ УБИЙЦ В МАЕНКРАФТ ЧТОБЫ ОНИ ОХОТИЛИСЬ ЗА МНОЙ ЗА 0 РУБЛЕЙ!!', 'Нам очень не хватает резни.'])
gamesd.set('min', ['Ванилла+, опять!', 'да ты ч- БЛЯЯЯЯЯЯЯЯЯЯЯЯЯЯЯЯЯЯЯЯЯЯЯЯЯЯЯЯЯЯЯЯЯЯЯЯ'])
gamesd.set('scp', ['Классика!', 'Вот только попробуйте выбрать и собраться меньше чем в 12 человек. -Вадим', '[...] 31 декабря 20██ года 23:59 в посёлке М█████████ [ДАННЫЕ УДАЛЕНЫ]. Класс объекта повышен до Кетер.'])
gamesd.set('zom', ['Несмотря на весь геморрой, который будет из-за 42 билда', 'fuck build 42, all my homies die in build 41'])
gamesd.set('jaz', ['Долгожданный новогодний перепроход', 'Спидран 100 шардов?', 'According to all known laws of aviation, theres no way a bee should be able to fly-'])
gamesd.set('bus', ['Вот это я вспомнил, правда?', 'Зачем он вспомнил...', 'Играем в нарды 6 часов подряд. Отказы не принимаются.'])
gamesd.set('tts', ['Какую именно настолку? Да похуй, разберёмся.', 'Много навстолок которые надо сыграть, так что давайте-давайте.'])
gamesd.set('tld', ['Ну должны же мы сыграть в обнову бля!\nТам дорога ВЕТВИТСЯ!', 'В этот раз уедем дальше пары метров.'])
gamesd.set('jbx', ['Потому что его давно не было.', 'Если не соберётся на футболко, я найду каждого.'])
gamesd.set('apo', ['Он же рандомайзер.', 'Он же "Пройди пж финального босса без урона, мне не хватает одной доски для крафта."', 'Нет, архипелаго для руины не доделан. Нет, я не ахуел. Нет, я не успею.'])
gamesd.set('amg', ['НУ КАМОН БЛЯЯЯЯЯ', 'Я думаю оно того стоит'])
gamesd.set('gmd', ['(КРОМЕ JAZZTRONAUTS, DESERT BUS и HL2 COOP)\nТТТ? Дезран? Слендер? Похуй, разберёмся!', '(КРОМЕ JAZZTRONAUTS, DESERT BUS и HL2 COOP) Muhosranks DrakrP'])
gamesd.set('hl1', ['(В Sven Co-op или Garry\'s Mod)\nПотому что мы его так и не прошли.', '(В Sven Co-op или Garry\'s Mod) Нужён жёсткий спидран хл1, чтобы потом пойти пвпшиться как гигачады'])
gamesd.set('hl2', ['(В Garry\'s Mod или Synergy)\nПотому что планировали-планировали, да не выпланировали.', '(В Garry\'s Mod или) Synergy? Моему другу очень надо, пж'])
gamesd.set('lbf', ['Самое время!\n(там кстати даже эпизоды пройти можно!)'])
gamesd.set('ttd', ['паравозики', 'Мне очень нужно построить спагетти из рельс'])
gamesd.set('sdm', ['Ностальгия', 'ИДИ КО МНЕ, ТЫ ОБРЕТЁШЬ ТО ЧТО ЗАСЛУЖИВАЕШЬ.', 'Вызываю тебя 1 на 1 на АТП, на перестрелку приходим с четёрьмя обоймами и ножами.'])
gamesd.set('tio', ['Становимся китайцами, блок за блоком', 'ту ту-ту-ту ту-ту-ту ту-ту-ту ту-ту-ту ту-ту ту-ту-ту-ту', 'Одинокий Вадим ищёт партнёра для забирания по башне, в коплекте идёт один саппорт(мне) -Анонимно'])
gamesd.set('svc', ['(КРОМЕ HL1 COOP)\nSTS, карты на прохождение и прочее'])
gamesd.set('dtl', ['Мочить зомбаков :)', 'Ты не мужик, если не можешь нафармить на Т5 пушку за первую волну(даже если ты действительно не мужик)', 'Назначаю захват сервера пендосов на новый год, поднимем шухер с пацанами'])
gamesd.set('lco', ['Продолжаем!\n(по поводу сборки ничего не обещаю)', 'Нужно собраться в 6-10 человек и обнести эту заброшку как завод ради медных проводов, чтоб жизнь мёдом не казалась'])
gamesd.set('cod', ['Давно пора.', 'Надо.'])
gamesd.set('sgm', ['Куда ж без пары-тройки игр в сигейм?', 'Стандарт', 'Нет (-300)', 'Где ты был 18 августа в 16:11 дня? На размышление даётся 42! секунд'])
gamesi = new Map()
gamesi.set('bin', ['minecraft1.png', 'minecraft2.png', 'minecraft34.png', 'minecraft4.png'])
gamesi.set('uhc', gamesi.get('bin'))
gamesi.set('min', gamesi.get('bin'))
gamesi.set('scp', ['sl.png'])
gamesi.set('zom', ['riba.gif'])
gamesi.set('jaz', ['jzt.png'])
gamesi.set('bus', ['bus.png'])
gamesi.set('tts', ['tts.png', 'tts2.png'])
gamesi.set('tld', ['tld.png', 'long_drive.png'])
gamesi.set('jbx', ['jbx1.png', 'jbx2.png'])
gamesi.set('apo', ['ap.webp', 'ap.png'])
gamesi.set('amg', ['amg1.png', 'amg2.png'])
gamesi.set('gmd', ['gmod.png'])
gamesi.set('hl1', ['hl.png'])
gamesi.set('hl2', ['hl2.png'])
gamesi.set('lbf', ['lf.png'])
gamesi.set('ttd', ['ttd.png', 'ttdd.png'])
gamesi.set('sdm', ['st.png', 'st2.png'])
gamesi.set('tio', ['tio.png'])
gamesi.set('svc', ['svc.png'])
gamesi.set('dtl', ['dthl.png'])
gamesi.set('lco', ['lc.png', 'lc2.png', 'lastwhythefuckdidyousuggestthistomeohmyfuckinggodwhydudeffs.png'])
gamesi.set('cod', ['cod.png', 'cod2.png', 'cod3.png'])
gamesi.set('sgm', ['sgm.webp'])
games.forEach(el => {
    tbl = gamesi.get(el)
    tbl.forEach(th => {
        img = new Image()
        img.src = 'files/' +th
    })
});
matchups = []
const g1name = document.getElementById('g1name')
const g2name = document.getElementById('g2name')
const g1btn = document.getElementById('g1btn')
const g2btn = document.getElementById('g2btn')
const g1desc = document.getElementById('g1desc')
const g2desc = document.getElementById('g2desc')
const g1img = document.getElementById('g1img')
const g2img = document.getElementById('g2img')
for (let index = 0; index < games.length; index++) {
    const element = games[index];
    if (index+1<games.length) {
        for (let ind2 = index+1; ind2 < games.length; ind2++) {
            const element2 = games[ind2];
            matchups.push(element+'/'+element2)
        }
    }
}
foughtMatchups = []
toast = document.getElementById('liveToast')
toast2 = bootstrap.Toast.getOrCreateInstance(toast)
date = new Date()
function change() {
    if (matchups.length == 0) {
        return
    }
    index = Math.floor(Math.random()*matchups.length)
    selmup = matchups.splice(index, 1)[0].split('/')
    date = new Date()
    selg1 = selmup[0]
    selg2 = selmup[1]
    if (Math.random() >= 0.5) {
        [selg1, selg2] = [selg2, selg1]
    }
    g1name.textContent = gamesn.get(selg1)[0]
    g2name.textContent = gamesn.get(selg2)[0]
    g1btn.textContent = gamesn.get(selg1)[0]
    g2btn.textContent = gamesn.get(selg2)[0]
    g1desc.textContent = gamesd.get(selg1)[Math.floor(Math.random()*gamesd.get(selg1).length)]
    g2desc.textContent = gamesd.get(selg2)[Math.floor(Math.random()*gamesd.get(selg2).length)]
    g1img.src = 'files/' +gamesi.get(selg1)[Math.floor(Math.random()*gamesi.get(selg1).length)]
    g2img.src = 'files/' +gamesi.get(selg2)[Math.floor(Math.random()*gamesi.get(selg2).length)]
}
audio = new Audio('files/OS_Error.wav')
hasAdded = false
function thewinning(x) {
    if (matchups.length == 0) {
        toast2.show()
        audio.play()
        if(hasAdded) {
            download(JSON.stringify(foughtMatchups), "text/plain;charset=utf-8;", 'result.json')
            return
        }
    }
    if(x == 1) {
        [selg1, selg2] = [selg2, selg1]
    }
    foughtMatchups.push([selg1, selg2, new Date().getTime()])
    if(matchups.length == 0) {
        hasAdded = true
        download(JSON.stringify(foughtMatchups), "text/plain;charset=utf-8;", 'result.json')
    }
}
function button(x) {
    thewinning(x)
    change()
}
function download(content, mimeType, filename){
    const a = document.createElement('a') // Create "a" element
    const blob = new Blob([content], {type: mimeType}) // Create a blob (file-like object)
    const url = URL.createObjectURL(blob) // Create an object URL from blob
    a.setAttribute('href', url) // Set "a" element link
    a.setAttribute('download', filename) // Set download filename
    a.click() // Start downloading
}